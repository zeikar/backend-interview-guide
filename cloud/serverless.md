# 서버리스(Serverless)

## 목차

- [서버리스란?](#서버리스란)
- [서버리스의 주요 구성 요소](#서버리스의-주요-구성-요소)
- [서버리스의 장점](#서버리스의-장점)
- [서버리스의 단점](#서버리스의-단점)
- [대규모 트래픽 환경에서 서버리스](#대규모-트래픽-환경에서-서버리스)

---

## 서버리스란?

**서버리스(Serverless)** 는 클라우드 서비스 제공자가 애플리케이션 실행에 필요한 **서버 관리**를 전적으로 책임지는 **클라우드 컴퓨팅 모델**입니다. 개발자는 서버 인프라 관리 없이 애플리케이션 개발에만 집중할 수 있으며, 애플리케이션은 **이벤트 기반**으로 실행됩니다.

서버리스 환경에서는 **자동 확장**, **종량제 과금(Pay-as-you-go)**, **무상태 함수 실행** 등이 기본적으로 제공됩니다.

### 주요 특징:

- **No Server Management:** 서버의 프로비저닝, 패치, 스케일링 등 운영 작업이 필요 없습니다.
- **이벤트 중심(Event-driven):** 요청이나 트리거가 발생할 때만 실행되며, 유휴 상태에서는 리소스를 소비하지 않습니다.
- **초단위 과금:** 실행 시간에 비례하여 비용이 청구됩니다.

**대표적인 서버리스 플랫폼:**

- **AWS Lambda**
- **Google Cloud Functions**
- **Azure Functions**
- **IBM Cloud Functions**

---

## 서버리스의 주요 구성 요소

서버리스 컴퓨팅은 다양한 클라우드 서비스와 결합하여 작동합니다. 아래는 주요 구성 요소입니다.

### 1. **FaaS (Function as a Service)**

- **설명:** 단일 기능을 수행하는 작은 코드 단위를 이벤트 기반으로 실행합니다.
- **특징:** 함수는 짧은 시간 동안 실행되며, 트리거에 의해 활성화됩니다.
- **예시:** AWS Lambda, Google Cloud Functions.

### 2. **BaaS (Backend as a Service)**

- **설명:** 데이터베이스, 인증, 파일 저장, 메시징 서비스 등 백엔드 서비스를 클라우드 제공자가 관리합니다.
- **특징:** 개발자는 백엔드 인프라 없이 API 호출만으로 서비스를 사용할 수 있습니다.
- **예시:** Firebase, AWS Amplify, Auth0.

### 3. **이벤트 소스 (Event Source)**

- **설명:** 서버리스 함수 실행을 트리거하는 이벤트 소스입니다.
- **예시:**
  - S3 버킷에서 파일 업로드 이벤트
  - 데이터베이스 변경 (DynamoDB Streams)
  - HTTP 요청 (API Gateway)

---

## 서버리스의 장점

### 1. **운영 부담 감소**

- 서버 관리, 프로비저닝, 유지보수를 클라우드 제공자가 처리하므로, 개발자는 애플리케이션 코드에만 집중할 수 있습니다.

### 2. **비용 효율성**

- 실행 시간에 비례한 **종량제 과금**으로, 사용하지 않는 리소스에 대해 비용이 발생하지 않습니다.
- 특히 트래픽이 불규칙하거나 간헐적인 워크로드에서 비용 절감 효과가 큽니다.

### 3. **자동 확장성**

- 서버리스 함수는 트래픽 증가에 따라 자동으로 확장됩니다. 함수 호출 수에 비례하여 실행 환경을 동적으로 생성합니다.

### 4. **빠른 배포와 개발**

- 작은 함수 단위로 코드를 작성하고 배포하기 때문에 개발 주기가 짧습니다.
- CI/CD 파이프라인과 쉽게 통합할 수 있습니다.

### 5. **이벤트 기반 처리**

- 이벤트가 발생할 때만 실행되므로, 리소스를 효율적으로 사용할 수 있습니다.
- 실시간 데이터 처리와 트리거 기반 워크로드에 적합합니다.

---

## 서버리스의 단점

### 1. **제한된 실행 시간**

- 대부분의 서버리스 플랫폼은 함수 실행 시간에 제한이 있습니다(예: AWS Lambda는 최대 15분). 긴 작업은 적합하지 않습니다.

### 2. **콜드 스타트 문제**

- 서버리스 함수는 유휴 상태일 때 실행 환경을 종료하며, 이후 첫 호출 시 환경을 다시 초기화해야 하므로 지연(Cold Start)이 발생할 수 있습니다.

### 3. **디버깅 및 모니터링 어려움**

- 서버리스는 분산된 이벤트 기반 아키텍처로 인해, 디버깅과 로그 분석이 복잡할 수 있습니다.
- 이를 해결하기 위해 CloudWatch, StackDriver, Datadog 같은 도구를 사용해야 합니다.

### 4. **플랫폼 의존성(Vendor Lock-in)**

- 각 클라우드 제공자마다 서버리스 아키텍처와 API가 다르므로, 특정 플랫폼에 종속될 위험이 있습니다.

### 5. **상태 관리의 어려움**

- 서버리스는 기본적으로 **무상태(Stateless)** 로 설계되므로, 애플리케이션의 상태를 외부 데이터베이스나 캐시 시스템에 저장해야 합니다.

---

## 대규모 트래픽 환경에서 서버리스

### 1. **자동 확장**

- 서버리스는 트래픽 증가에 따라 **자동으로 새로운 인스턴스를 생성**합니다. 클라우드 제공자는 요청에 맞춰 리소스를 동적으로 할당하므로, 대규모 트래픽에서도 성능 저하 없이 대응할 수 있습니다.

- **예시: AWS Lambda의 동시 실행**
  - Lambda는 기본적으로 계정당 1,000개의 동시 실행 제한이 있지만, 필요 시 요청을 통해 한계를 늘릴 수 있습니다.

---

### 2. **이벤트 기반 처리**

대규모 트래픽이 발생하는 애플리케이션에서 **이벤트 기반 처리**는 효과적입니다.

- **HTTP 요청:** API Gateway를 통해 트래픽을 서버리스 함수로 라우팅.
- **비동기 처리:** 비동기 이벤트(예: 메시지 큐, 스트림 데이터)를 서버리스 함수로 처리.
- **실시간 데이터 분석:** 로그 데이터나 센서 데이터를 실시간으로 수집하고 분석.

---

### 3. **콜드 스타트 문제 해결**

- **트래픽 급증 시 문제:**
  - 콜드 스타트는 대규모 트래픽이 발생할 때 지연 문제를 야기할 수 있습니다.
- **해결 방법:**
  - **Provisioned Concurrency:** AWS Lambda와 같은 플랫폼에서는 프로비저닝된 동시 실행을 설정하여, 항상 실행 가능한 환경을 유지합니다.
  - **함수 크기 최적화:** 함수 이미지 크기를 줄이고, 경량화된 런타임을 선택하여 초기화 시간을 단축합니다.

---

### 4. **비용 최적화**

- 서버리스는 사용량 기반 과금 모델로, 대규모 트래픽 환경에서도 **초당 실행 비용**만 지불하므로 비용 효율적입니다.
- **예시:**
  - 트래픽이 급증하더라도 요청당 비용만 증가하며, 비유휴 상태에서는 비용이 발생하지 않습니다.

---

### 5. **모니터링 및 로깅**

대규모 트래픽에서는 애플리케이션의 상태를 실시간으로 파악하는 것이 중요합니다.

- **AWS Lambda:**
  - CloudWatch를 통해 함수 실행 시간, 메모리 사용량, 에러율 등의 메트릭을 모니터링할 수 있습니다.
- **분산 트레이싱 도구:**
  - AWS X-Ray, Datadog을 활용해 함수 호출 간의 트랜잭션을 추적하고 병목 지점을 분석할 수 있습니다.

---

## 결론

서버리스는 대규모 트래픽 환경에서 다음과 같은 이점을 제공합니다:

1. **자동 확장:** 트래픽 급증 시에도 성능 저하 없이 대응 가능.
2. **비용 효율성:** 요청당 과금으로 유휴 상태에서 비용이 발생하지 않음.
3. **이벤트 기반 처리:** 실시간 데이터 처리, 비동기 작업 처리에 적합.
4. **운영 간소화:** 서버 관리 부담이 없으므로 개발과 배포 속도가 빨라짐.

그러나 서버리스는 **콜드 스타트**, **플랫폼 종속성**, **긴 실행 시간 제한** 등 몇 가지 단점을 가지고 있습니다. 이러한 한계를 이해하고 적절한 설계를 통해 극복한다면, 서버리스는 대규모 트래픽 애플리케이션의 이상적인 솔루션이 될 수 있습니다.
